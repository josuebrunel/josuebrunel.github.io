<!doctype html><html lang=en><head><meta charset=UTF-8><title>Simple Concurrent Web Scraping in Go with Geziyor, GoQuery, and Headless Chrome | Welcome into my head</title><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo 0.147.9"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Josué"><meta name=keywords content="golang,scraping,web"><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><link rel=stylesheet type=text/css media=screen href=/css/all.css><meta property="og:url" content="https://example.org/posts/simple-concurrent-web-scraping-in-go/"><meta property="og:site_name" content="Welcome into my head"><meta property="og:title" content="Simple Concurrent Web Scraping in Go with Geziyor, GoQuery, and Headless Chrome"><meta property="og:description" content="Web scraping is a powerful technique for extracting data from websites, and Go provides excellent tools for this task. In this blog post, we’ll explore how to use the Geziyor library along with GoQuery and headless Chrome to create efficient, concurrent web scrapers in Go.
We’ll use Geziyor for its powerful scraping capabilities and built-in concurrency, GoQuery for HTML parsing, and headless Chrome for JavaScript rendering.
TLDR: source code Installation To get started, install Geziyor using the following command:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-17T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-17T00:00:00+00:00"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Scraping"><meta property="article:tag" content="Web"><meta name=twitter:card content="summary"><meta name=twitter:title content="Simple Concurrent Web Scraping in Go with Geziyor, GoQuery, and Headless Chrome"><meta name=twitter:description content="Web scraping is a powerful technique for extracting data from websites, and Go provides excellent tools for this task. In this blog post, we’ll explore how to use the Geziyor library along with GoQuery and headless Chrome to create efficient, concurrent web scrapers in Go.
We’ll use Geziyor for its powerful scraping capabilities and built-in concurrency, GoQuery for HTML parsing, and headless Chrome for JavaScript rendering.
TLDR: source code Installation To get started, install Geziyor using the following command:"><meta itemprop=name content="Simple Concurrent Web Scraping in Go with Geziyor, GoQuery, and Headless Chrome"><meta itemprop=description content="Web scraping is a powerful technique for extracting data from websites, and Go provides excellent tools for this task. In this blog post, we’ll explore how to use the Geziyor library along with GoQuery and headless Chrome to create efficient, concurrent web scrapers in Go.
We’ll use Geziyor for its powerful scraping capabilities and built-in concurrency, GoQuery for HTML parsing, and headless Chrome for JavaScript rendering.
TLDR: source code Installation To get started, install Geziyor using the following command:"><meta itemprop=datePublished content="2024-10-17T00:00:00+00:00"><meta itemprop=dateModified content="2024-10-17T00:00:00+00:00"><meta itemprop=wordCount content="939"><meta itemprop=keywords content="Golang,Scraping,Web"></head><body><header><div id=titletext><h2 id=titleonly><a href=https://example.org/>Welcome into my head</a></h2></div><div id=title-social><div id=social><nav><ul><li><button id=dark-mode aria-label="Switch Dark Mode"><span title="Switch Dark Mode" class="icons fas fa-moon" aria-hidden=true></span></button></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=/posts/>Posts</a></li></ul></nav></div></header><main><div class=post><article><div class=post-header><div class=meta><div class=date><span class=day>17</span>
<span class=rest>Oct 2024</span></div></div><div class=matter><h1 class=title>Simple Concurrent Web Scraping in Go with Geziyor, GoQuery, and Headless Chrome</h1><p class=post-meta><span class=post-meta><span aria-label=Author:><span class="fas fa-user" aria-hidden=true></span></span>&nbsp;
Josué</span></p></div></div><div class=markdown><p>Web scraping is a powerful technique for extracting data from websites, and Go provides excellent tools for this task. In this blog post, we&rsquo;ll explore how to use the Geziyor library along with GoQuery and headless Chrome to create efficient, concurrent web scrapers in Go.</p><p>We&rsquo;ll use Geziyor for its powerful scraping capabilities and built-in concurrency, GoQuery for HTML parsing, and headless Chrome for JavaScript rendering.</p><h2 id=tldr-source-code>TLDR: source code</h2><h2 id=installation>Installation</h2><p>To get started, install Geziyor using the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go get github.com/geziyor/geziyor
</span></span></code></pre></div><p>Geziyor includes GoQuery as a dependency, so it will be installed automatically.</p><h2 id=scraping-a-simple-html-page>Scraping a Simple HTML Page</h2><p>Let&rsquo;s begin with a simple example of scraping a static HTML page. Geziyor uses <em>exporter</em> (interface) to export parsed data. We will define a generic type <em>DataExporter</em> that will help us export data of any type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// DataExporter is a generic struct that can export data of any type.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>DataExporter</span>[<span style=color:#a6e22e>T</span> <span style=color:#66d9ef>any</span>] <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Data</span> []<span style=color:#a6e22e>T</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Export adds scraped data to the DataExporter&#39;s Data slice.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// It receives data through a channel and appends it to the Data slice.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>de</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>DataExporter</span>[<span style=color:#a6e22e>T</span>]) <span style=color:#a6e22e>Export</span>(<span style=color:#a6e22e>scraped</span> <span style=color:#66d9ef>chan</span> <span style=color:#66d9ef>any</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>de</span>.<span style=color:#a6e22e>Data</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>de</span>.<span style=color:#a6e22e>Data</span> = []<span style=color:#a6e22e>T</span>{}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>pd</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>scraped</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>d</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>pd</span>.(<span style=color:#a6e22e>T</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>de</span>.<span style=color:#a6e22e>Data</span> = append(<span style=color:#a6e22e>de</span>.<span style=color:#a6e22e>Data</span>, <span style=color:#a6e22e>d</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now, let&rsquo;s scrape quotes from <a href=http://quotes.toscrape.com/ target=_blank>http://quotes.toscrape.com/</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// AutherNText represents a quote with its author and text.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AutherNText</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Author</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;author&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Text</span>   <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;text&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// quotesParse is a parsing function for quote pages.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// It extracts author and text information from each quote on the page,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// exports the data as AutherNText structs, and follows pagination links.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>quotesParse</span>(<span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Geziyor</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Response</span>) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Find all quote elements and process each one</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;div.quote&#34;</span>).<span style=color:#a6e22e>Each</span>(<span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>i</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>goquery</span>.<span style=color:#a6e22e>Selection</span>) {
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Extract author and text from the quote</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Exports</span> <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>AutherNText</span>{
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>Author</span>: <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;small.author&#34;</span>).<span style=color:#a6e22e>Text</span>(),
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>Text</span>:   <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;span.text&#34;</span>).<span style=color:#a6e22e>Text</span>(),
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Check for a &#34;next&#34; pagination link</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>href</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;li.next &gt; a&#34;</span>).<span style=color:#a6e22e>Attr</span>(<span style=color:#e6db74>&#34;href&#34;</span>); <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#75715e>// If found, follow the link and continue parsing</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>JoinURL</span>(<span style=color:#a6e22e>href</span>), <span style=color:#a6e22e>quotesParse</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>exporter</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>DataExporter</span>[<span style=color:#a6e22e>AutherNText</span>]{}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>g</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>NewGeziyor</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Options</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>StartURLs</span>: []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;http://quotes.toscrape.com/&#34;</span>},
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ParseFunc</span>: <span style=color:#a6e22e>quotesParse</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Exporters</span>: []<span style=color:#a6e22e>export</span>.<span style=color:#a6e22e>Exporter</span>{<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>exporter</span>},
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Start</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Info</span>(<span style=color:#e6db74>&#34;Quotes scraped&#34;</span>, <span style=color:#e6db74>&#34;count&#34;</span>, len(<span style=color:#a6e22e>exporter</span>.<span style=color:#a6e22e>Data</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As you can see, we just need to define:</p><ul><li>A data structure to hold our data</li><li>A function to parse the HTML page</li><li>A Geziyor instance</li></ul><h2 id=concurrent-scraping>Concurrent Scraping</h2><p>By providing multiple start URLs, we can take advantage of Geziyor&rsquo;s built-in concurrency. Geziyor will scrape these URLs concurrently, significantly speeding up the scraping process when dealing with multiple pages.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Turtle represents a turtle species with its name, description, and image URL.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Turtle</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Name</span>        <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Description</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;description&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Image</span>       <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;image&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// turtleScraper is a parsing function for turtle family pages.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// It extracts the turtle&#39;s name, description, and image URL from the HTML</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// and exports the data as a Turtle struct.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>turtleScraper</span>(<span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Geziyor</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Response</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Exports</span> <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>Turtle</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Name</span>:        <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;.turtle-family-detail &gt; h3&#34;</span>).<span style=color:#a6e22e>Text</span>(),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Description</span>: <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;.turtle-family-detail &gt; p&#34;</span>).<span style=color:#a6e22e>Text</span>(),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Image</span>:       <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;.turtle-family-detail &gt; img&#34;</span>).<span style=color:#a6e22e>AttrOr</span>(<span style=color:#e6db74>&#34;src&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>),
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>turtleExporter</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>DataExporter</span>[<span style=color:#a6e22e>Turtle</span>]{}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>urls</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;https://www.scrapethissite.com/pages/frames/?frame=i&amp;family=Cheloniidae&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;https://www.scrapethissite.com/pages/frames/?frame=i&amp;family=Chelydridae&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;https://www.scrapethissite.com/pages/frames/?frame=i&amp;family=Carettochelyidae&#34;</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>g</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>NewGeziyor</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Options</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>StartURLs</span>: <span style=color:#a6e22e>urls</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ParseFunc</span>: <span style=color:#a6e22e>turtleScraper</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Exporters</span>: []<span style=color:#a6e22e>export</span>.<span style=color:#a6e22e>Exporter</span>{<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>turtleExporter</span>},
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Start</span>()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Info</span>(<span style=color:#e6db74>&#34;Turtle information scraped&#34;</span>, <span style=color:#e6db74>&#34;count&#34;</span>, len(<span style=color:#a6e22e>turtleExporter</span>.<span style=color:#a6e22e>Data</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In this code, the only new <em>Option</em> is the <em>StartURLS</em> one. The <em>parsing function</em> will be concurrently called for each URL in <em>StartURLS</em>.</p><h2 id=scraping-javascript-rendered-pages>Scraping JavaScript-Rendered Pages</h2><p>In this final part, we&rsquo;ll tackle the challenge of scraping JavaScript-rendered content from AliExpress. This example demonstrates how to use Geziyor with a headless Chrome browser to scrape dynamic web pages. We will need to have a headless Chrome instance running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d -p 9222:9222 --rm --name headless-shell chromedp/headless-shell
</span></span></code></pre></div><p>Here&rsquo;s an example of how to use a headless browser and manage JS rendered pages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// AliExpressProduct represents a product from AliExpress with its name and price.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AliExpressProduct</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Name</span>  <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Price</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;price&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// aliexpressProduct is a parsing function for AliExpress product pages.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// It extracts the product title and price from the rendered HTML and exports</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the data as an AliExpressProduct struct.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Note: This function uses JavaScript rendering to access dynamic content.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>aliexpressProduct</span>(<span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Geziyor</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Response</span>) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Extract the product title from the h1 element with data-pl=&#34;product-title&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>title</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;h1[data-pl=product-title]&#34;</span>).<span style=color:#a6e22e>Text</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Extract the product price from the span element with class &#34;product-price-value&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>price</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>HTMLDoc</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;span.product-price-value&#34;</span>).<span style=color:#a6e22e>Text</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Export the extracted data as an AliExpressProduct struct</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Exports</span> <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>AliExpressProduct</span>{<span style=color:#a6e22e>Name</span>: <span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>Price</span>: <span style=color:#a6e22e>price</span>}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>aliExport</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>DataExporter</span>[<span style=color:#a6e22e>AliExpressProduct</span>]{}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>urls</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;https://www.aliexpress.com/item/1005006959851087.html&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;https://www.aliexpress.com/item/1005007265735821.html&#34;</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>g</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>NewGeziyor</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Options</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>StartRequestsFunc</span>: <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>geziyor</span>.<span style=color:#a6e22e>Geziyor</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>wg</span> <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>WaitGroup</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>url</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>urls</span> {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>url</span> <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Done</span>()
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>GetRendered</span>(<span style=color:#a6e22e>url</span>, <span style=color:#a6e22e>aliexpressProduct</span>)
</span></span><span style=display:flex><span>                }(<span style=color:#a6e22e>url</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Wait</span>()
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Exporters</span>:       []<span style=color:#a6e22e>export</span>.<span style=color:#a6e22e>Exporter</span>{<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>aliExport</span>},
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>BrowserEndpoint</span>: <span style=color:#e6db74>&#34;ws://127.0.0.1:9222&#34;</span>,
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Start</span>()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>slog</span>.<span style=color:#a6e22e>Info</span>(<span style=color:#e6db74>&#34;AliExpress products scraped&#34;</span>, <span style=color:#e6db74>&#34;count&#34;</span>, len(<span style=color:#a6e22e>aliExport</span>.<span style=color:#a6e22e>Data</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=key-points>Key Points</h2><ul><li><strong>Headless Chrome</strong>: By setting the <code>BrowserEndpoint</code> option, we tell Geziyor to use our headless Chrome instance for rendering JavaScript.</li><li><strong>GetRendered</strong>: Instead of the regular <code>Get</code> method, we use <code>GetRendered</code> to ensure JavaScript is executed before scraping.</li><li><strong>Manual Concurrency</strong>: We implement manual concurrency using goroutines and a WaitGroup. This gives us fine-grained control over the scraping process.</li><li><strong>Error Handling</strong>: In a production environment, you&rsquo;d want to add error handling and potentially implement retries for failed requests.</li></ul><h2 id=conclusion>Conclusion</h2><p>Geziyor, combined with GoQuery and headless Chrome, provides a powerful toolkit for web scraping in Go. From simple static pages to complex, JavaScript-rendered content, these tools can handle a wide range of scraping tasks efficiently and concurrently.</p><p>Remember to use web scraping responsibly and ethically, respecting the terms of service of the websites you&rsquo;re scraping and considering the load your scraper puts on their servers.</p><p>Happy scraping!</p></div><div class=tags><div class=taxosfloating_left><p>Tags</p></div><div class=termsfloating_right><p><a href=/tags/golang/>golang</a>
<a href=/tags/scraping/>scraping</a>
<a href=/tags/web/>web</a></p></div><div class=clearit></div></div></article></div></main><script src=/js/dark-mode.js></script></body></html>